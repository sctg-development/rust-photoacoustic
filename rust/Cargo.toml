[package]
name = "rust_photoacoustic"
version = "0.1.0"
edition = "2021"
authors = ["Ronan Le Meillat"]
description = "Water Vapor Analyzer using Laser Photoacoustic Spectroscopy"

[dependencies]
# Audio processing
cpal = "0.15.3"           # Audio input
hound = "3.5.1"             # WAV file handling
include_dir = "0.7.4"       # Include files in the binary
rustfft = "6.3.0"           # Fast Fourier Transform
ndarray = "0.16.1"          # Numerical arrays
dasp_sample = "0.11.0"      # Digital signal processing
dasp_signal = "0.11.0"      # Signal processing
dasp_window = "0.11.1"      # Windowing functions
dasp_ring_buffer = "0.11.0" # Ring buffer for audio

# Command line interface
clap = { version = "4.5.38", features = ["derive"] }

# Web interface
rocket = { version = "0.5", features = ["json", "tls", "secrets"] }
rocket_cors = "0.6.0"
rocket_okapi = { version = "0.9.0", features = [
    "rapidoc",
    "swagger",
] } # Automatic OpenAPI generation at build time 
jsonwebtoken = "9.3.1" # For JWT auth

# Error handling and utilities
anyhow = "1.0.98"                                                                     # Error handling
thiserror = "2.0.12"                                                                     # Error definitions
log = "0.4.27"                                                                           # Logging
env_logger = "0.11.8"                                                                   # Logging implementation
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.140"                                                                    # JSON serialization
serde_yml = "0.0.12"                                                                  # YAML serialization
jsonschema = "0.30.0"                                                                   # JSON Schema validation
yaml-rust = "0.4.5"                                                                     # YAML parsing
base64 = "0.22.1"                                                                       # For encoding/decoding certificates
tempfile = "3.20.0"                                                                   # Temporary files for tests
chrono = { version = "0.4.41", features = ["serde"] }
rand = "0.9.1"
reqwest = "0.12.16"
oxide-auth = { git = "https://github.com/197g/oxide-auth", branch = "master" }
oxide-auth-rocket = { git = "https://github.com/197g/oxide-auth", branch = "master" }
serde_urlencoded = "0.7.1"
url = "2.5.4"                                                                           # URL parsing
rcgen = "0.13.2"                                                                        # Certificate generation
time = "0.3.41"                                                                          # Time handling for certificates
rsa = {version = "0.9.8", features=["pem","sha2"]}
tokio = { version = "1.45.1", features = ["rt", "macros", "rt-multi-thread", "time"] }
tokio-modbus = { version = "0.16.1", features = ["tcp", "tcp-server", "server"] }
pwhash = "1.0.0"  # Add this dependency for password hashing
handlebars = "6.3.2"
quote = "1.0.40"
syn = {version="2.0.101", features=["full"]}
auth-macros = { path = "auth-macros" }

[dev-dependencies]
criterion = "0.6"                                   # Benchmarking
mockall = "0.13.1"                                    # Mocking for tests
oauth2 = "5.0.0"                                    # OAuth2 client implementation
wiremock = "0.6.3"                                  # HTTP mocking
tokio = { version = "1.45.0", features = ["full"] }
reqwest = { version = "0.12.15", features = ["json"] }
uuid = { version = "1.17.0", features = ["v4"] }
url = "2.5.4"                                         # URL parsing
sha2 = "0.10.9"                                       # Pour le hachage SHA-256 utilisé dans PKCE
base64 = "0.22.1"                                     # Pour l'encodage Base64URL utilisé dans PKCE
serde_json = "1.0.140"                                  # Pour analyser la réponse JSON des tokens
regex = "1.11.1"                                    # Expressions régulières

[build-dependencies]
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.140"                                 # JSON serialization
tokio = { version = "1.45.0", features = ["full"] }
rcgen = "0.13.2"                                     # Certificate generation
time = "0.3.41"                                       # Time handling for certificates
anyhow = "1.0.98"                                  # Error handling
rsa = "0.9.8"

[patch."https://github.com/197g/oxide-auth"]
oxide-auth-rocket = { path = "./oxide-auth-patched/oxide-auth-rocket" }
oxide-auth = { path = "./oxide-auth-patched/oxide-auth" }
