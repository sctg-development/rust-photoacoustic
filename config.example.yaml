# Photoacoustic Water Vapor Analyzer Configuration
# this yaml file converted to json must pass config.schema.json schema validation

# Visualization server settings
visualization:
  # The port to listen on
  port: 8080
  # The address to bind to (ipv4 or ipv6)
  address: 127.0.0.1
  # The server name
  name: LaserSmartApiServer/0.1.0

  # The session secret key for the visualization server
  # This key is used to sign the session cookie
  # It can be securely generated with `openssl rand -base64 32`
  session_secret: 6wcVSUhxt1+YPEondChFXtesCL1boh57gqHv2gnEH7U=
  
  # SSL certificate PEM data (Base64 encoded) - Optional
  # generated with `cat rust-photoacoustic.local.pem | base64 -w0`
  # cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...

  # SSL key PEM data (Base64 encoded) - Optional
  # generated with `cat rust-photoacoustic.local.key | base64 -w0`
  # key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t...

  # HMAC secret for HS256 JWT token signing (used for API authentication)
  hmac_secret: my-super-secret-jwt-key-for-photoacoustic-app

  # RSA private and public keys base64 encoded pem for RS256 token signing (used for API authentication)
  # generated with rs256keygen
  rs256_private_key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUdyQWdFQUFpRUFyd0FZcXAvdGVvaUE4N2FWQStJTjQ1U1RvMTdMUVZPbGRUT3FJeHhQeElNQ0F3RUFBUUlnCldRVlpodUpYOGE4aXVkYzFNb1o1dldYcmxwdFlEUTQ3RXUwa2pNVVA2T0VDRVFEUjEyN0RsZWNKNU80V3B2VEcKdnQ1YkFoRUExWDZ4ZVVzUXpISkZTYlV4eXZEYStRSVJBS2Z1b05ZbHdTQko5Y0JySExseFJzRUNFUURCcTBOZApqNTMyaUxhWURablV5amNwQWhCSG9CU1JSTS9ESVA5dWE1MDhYMEtOCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
  rs256_public_key: LS0tLS1CRUdJTiBSU0EgUFVCTElDIEtFWS0tLS0tCk1DZ0NJUUN2QUJpcW4rMTZpSUR6dHBVRDRnM2psSk9qWHN0QlU2VjFNNm9qSEUvRWd3SURBUUFCCi0tLS0tRU5EIFJTQSBQVUJMSUMgS0VZLS0tLS0K
  
modbus:
  # modbus tcp port to listen on
  port: 1502
  # ipv4 or ipv6 to bind on
  address: '127.0.0.1'
  enabled: false

photoacoustic:
  # input_device and input_file are mutually exclusive
  #input_device: alsa:0 
  input_file: input.wav

  # excitation frequency in Hz
  frequency: 2000.0

  # bandwidth of the band-pass filter
  bandwidth: 100.0

  # window size of the fft analyzer
  window_size: 4096

  # number of spectra to average
  averages: 10

# control the access to the visualization server
access:
  users:
  # Array of users with their passwords and permissions
  # user: administrator
  - user: administrator
    pass: JDUkcVc2NUtlSTVwb2ZRMC5VTCRmTnl2Vjh4MTJQMnBvcXlGa2htUnNRRWhLRFV3LzIuUVpseDc1UEFxeWdECg== # openssl passwd -5 password | base64 -w0
    permissions:
      - "read:api"
      - "write:api"
      - "admin:api"
  # user: readder
  - user: reader
    pass: JDUkRmp3NUJRLlM1alZkOXVkciRma0E3eG9PYnhiL1Uxam1UeU05VjhzcDVPb1F3VzBSN1gzRW9pMjN0ZVVBCg== # openssl passwd -5 123445678 | base64 -w0
    permissions:
      - "read:api"
  clients:
    - client_id: LaserSmartClient
      default_scope: "openid profile email read:api write:api"
      allowed_callbacks:
        - 'http://localhost:8080/client/'
        - 'https://localhost:8080/client/'